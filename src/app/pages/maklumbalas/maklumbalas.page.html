<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>{{ title }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">{{ title }}</ion-title>
    </ion-toolbar>
  </ion-header>

  <form method="POST" action="" [formGroup]="feedbackForm">
  <ion-list lines="none">
    <ion-list-header>
      <ion-label>Maklumat Pengadu</ion-label>
    </ion-list-header>
    <ion-item>
      <ion-input formControlName="nama" mode="md" label="Nama*" label-placement="floating" fill="outline"></ion-input>
    </ion-item>
    <ion-item class="error" *ngIf="!feedbackForm.controls.nama.valid">
      <ion-label>Please enter your name</ion-label>
    </ion-item>
    <ion-item>
      <ion-input formControlName="tel" mode="md" label="Telefon*" label-placement="floating" fill="outline"></ion-input>
    </ion-item>
    <ion-item class="error" *ngIf="!feedbackForm.controls.tel.valid">
      <ion-label>Please enter valid phone number</ion-label>
    </ion-item>
  </ion-list>

  <ion-list lines="none">
    <ion-list-header>
      <ion-label>Maklumat Maklumbalas</ion-label>
    </ion-list-header>
    <ion-item>
      <ion-select (ionChange)="setKategori($event)" formControlName="kategori" label="Kategori" placeholder="Sila pilih" [multiple]="true">
        <ion-select-option value="Tempat Pembiakan">Tempat Pembiakan</ion-select-option>
        <ion-select-option value="Semburan & Fogging">Semburan & Fogging</ion-select-option>
        <ion-select-option value="Lain-lain">Lain-lain</ion-select-option>
      </ion-select>
    </ion-item>
    <ion-item *ngIf="showKeterangan">
      <ion-textarea id="details" formControlName="keterangan" mode="md" rows="5" label="Keterangan" fill="outline"
      labelPlacement="floating" [(ngModel)]="detail"></ion-textarea>
    </ion-item>
    <ion-item>
      <ion-textarea formControlName="feedback" mode="md" rows="5" label="Maklumbalas/Aduan" fill="outline"
      labelPlacement="floating"></ion-textarea>
    </ion-item>
    <ion-item> 
      <ion-label>Lampiran</ion-label>
    </ion-item>
  </ion-list>

  <div class="outline" (click)="uploadImage()">
    <div class="mailbox">
      <div class="inputdata">
        <input #imageUpload class="file-text" type="file" name="file" accept="image/*" (change)="onFileChanged($event)">
      </div>
      <ion-icon *ngIf="!file_view; else showImage" name="document-attach-outline" color="primary"></ion-icon>
      <ng-template #showImage>
        <img [src]="file_view"/>
      </ng-template>
      <div style="padding-bottom: 0.3em;">{{ filename }}</div>
    </div>
  </div>
  <div class="ion-padding">
    <ion-button expand="block" (click)="submitFeedback()">Hantar</ion-button>
  </div>
</form>
</ion-content>

